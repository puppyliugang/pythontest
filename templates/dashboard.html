<!DOCTYPE html>
<html lang="{{ session.get('language', 'zh') }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="personal_center">个人中心</title>
    <script src="{{ url_for('static', filename='js/i18n.js') }}"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>
<body>
    <!-- 顶部搜索栏 -->
    <header class="header">
        <div class="location">
            <span data-i18n="yangon">仰光</span> <span class="arrow-down">▼</span>
        </div>
        <div class="search-bar">
            <input type="search" data-i18n="search_labor_card" placeholder="我的劳工证">
            <button class="search-btn" data-i18n="search">搜索</button>
        </div>
        <div class="add-btn">+</div>
    </header>

    <!-- 用户信息卡片 -->
    <div class="user-card">
        <div class="user-info">
            <div class="avatar">
                <img src="{{ url_for('static', filename='images/avatars/default-avatar.jpg') }}" alt="avatar">
            </div>
            <div class="user-details">
                <div class="phone">{{ user.phone }}</div>
                <div class="balance"><span data-i18n="balance">余额</span>:******<span class="check" data-i18n="view">查看</span></div>
                <div class="verified" data-i18n="verified">已实名认证</div>
            </div>
            <div class="qr-code-btn" data-i18n="my_qrcode">我的二维码</div>
        </div>
    </div>

    <!-- 功能按钮组 -->
    <div class="feature-grid">
        <a href="/wallet" class="feature-item">
            <div class="feature-icon wallet"></div>
            <div class="feature-name" data-i18n="wallet">卡包</div>
        </a>
        <a href="/transfer" class="feature-item">
            <div class="feature-icon transfer"></div>
            <div class="feature-name" data-i18n="transfer">转账</div>
        </a>
        <div class="feature-item">
            <div class="feature-icon receive"></div>
            <div class="feature-name" data-i18n="receive">收钱</div>
        </div>
        <div class="feature-item">
            <div class="feature-icon scan"></div>
            <div class="feature-name" data-i18n="scan">扫一扫</div>
        </div>
    </div>

    <!-- 劳工证预览卡片 -->
    <div class="labor-card-preview">
        <a href="/wallet/labor" class="preview-card">
            <div class="card-header">
                <img src="{{ url_for('static', filename='images/icons/myanmar-emblem.png') }}" alt="myanmar_emblem" class="emblem">
                <div class="header-text">
                    <h3 data-i18n="republic_myanmar">缅甸联邦共和国</h3>
                    <h4 data-i18n="ministry_labor">劳工部</h4>
                </div>
            </div>
            <div class="card-content">
                <div class="photo-area">
                    <img src="{{ url_for('static', filename='images/avatars/default-avatar.jpg') }}" alt="id_photo" class="id-photo">
                </div>
                <div class="info-area">
                    <div class="name">{{ user.name }}</div>
                    <div class="id-number">{{ user.id_number }}</div>
                    <div class="expiry"><span data-i18n="valid_until">有效期至</span>: {{ user.expiry_date }}</div>
                </div>
                <div class="verified-badge">
                    <span class="verified-icon">✓</span>
                    <span data-i18n="verified">已实名认证</span>
                </div>
            </div>
        </a>
    </div>

    <!-- 底部导航栏 -->
    <nav class="bottom-nav">
        <a href="/dashboard" class="nav-item active">
            <div class="nav-icon home"></div>
            <div class="nav-name" data-i18n="home">主页</div>
        </a>
        <a href="/travel" class="nav-item">
            <div class="nav-icon travel"></div>
            <div class="nav-name" data-i18n="immigration">出入境</div>
        </a>
        <a href="/transfer" class="nav-item">
            <div class="nav-icon transfer"></div>
            <div class="nav-name" data-i18n="transfer">转账</div>
        </a>
        <a href="/messages" class="nav-item">
            <div class="nav-icon message">
                <span class="badge">5</span>
            </div>
            <div class="nav-name" data-i18n="messages">消息</div>
        </a>
        <a href="/profile" class="nav-item">
            <div class="nav-icon profile"></div>
            <div class="nav-name" data-i18n="my_profile">我的</div>
        </a>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 从 URL 或会话中获取当前语言
            const currentLang = document.documentElement.lang || 'zh';
            console.log('Current language:', currentLang); // 调试用
            changeLanguage(currentLang);
        });
    </script>
</body>
</html> 